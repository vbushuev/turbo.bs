Kontur.Module("Kontur.CallbackLightbox",function(t,n){function r(n){a.each(function(n,r){r.right=parseInt(t(r).css("right"),10)||0,r.bottom=parseInt(t(r).css("bottom"),10)||0}),a.click(function(r){r.preventDefault(),t("#"+d).parent().show(),o(u);var e=i.find('[data-lightbox-role="bottom-panel"]'),a=e.html();e.remove(),s.lightbox({create:function(){InitPostSimpleFormAsync(i,{url:n.url,serverErrorMessage:n.serverErrorMessage,errorAfterForm:!0,beforeSendCallback:function(){t("#"+d).attr("disabled",!0)},completeCallback:function(){t("#"+d).removeAttr("disabled")},successCallback:function(){s.find('[data-on-submit="hide"]').hide(),t("#"+d).parent().hide(),m.sendAmoCounterStatistics()}})},beforeOpen:function(){s.find('[data-on-submit="hide"]').show(),PostSimpleFormRemoveErrors(i),PostSimpleFormClearTextInputs(i),PostSimpleFormShowFormChildren(i)},wrapperStyle:n.wrapperStyle,lightboxClass:n.lightboxClass,buttonTemplate:'<span class="btn btn-sm btn-secondary m-r-xs" />',panelHtml:a})}),t(window).on("lightboxOpen",function(){o(u)}).on("lightboxClose",function(){o(0)}),t(window.document).on("click","#"+d,function(){return i.submit()})}function e(){var n={},r=t("html").get(0);return n.vertical=r.scrollHeight>r.clientHeight,n.horizontal=r.scrollWidth>r.clientWidth,n}function o(n){a.each(function(r,o){var a=t(o);a.hasClass("callback-link_fixed")&&a.css({right:a[0].right+(e().vertical?n:0),bottom:a[0].bottom+(e().horizontal?n:0)})})}var a,i,s,l,c,u,f,m=this,d="callbackLightboxSubmit";m.init=function(e,o){(f||o)&&(f=o||f,a=a?a.add(t(e)):t(e),l=t(".stick"),c=t(".page-layout"),s=t(f.lightbox),i=s.find("form"),u=n.get(),a.off(),r(f),i.find(".js-phone").inputmask("+7 999 999 99 99"))},m.sendAmoCounterStatistics=function(){var n=t("#amo-counter");if(!(n.length<1)){var r=n.attr("data-transid");ef_transaction_properties="ev_callback2017=1&ev_transid="+r,effp()}}},[jQuery,"Kontur.ScrollWidth"]),Kontur.Module("Kontur.Callback",function(t){function n(t,n){var e=this;e.params=n,e.$form=t,e.$btn=t.find('input[type="submit"]'),t.find(".js-phone").inputmask("+7 999 999 99 99"),InitPostSimpleFormAsync(e.$form,{url:e.params.url,serverErrorMessage:e.params.serverErrorMessage,errorAfterForm:!0,beforeSendCallback:function(){return e.$btn.attr("disabled",!0)},completeCallback:function(){return e.$btn.removeAttr("disabled")},successCallback:function(){e.$btn.parent().hide(),r.sendAmoCounterStatistics()}})}var r=this;r.init=function(r){t(r.form).not("[data-callback-form]").each(function(e,o){var a=t(o),i=new n(a,r);a.data("callback-form",i)})},r.sendAmoCounterStatistics=function(){var n=t("#amo-counter");if(!(n.length<1)){var r=n.attr("data-transid");ef_transaction_properties="ev_callback2017=1&ev_transid="+r,effp()}}},[jQuery]);
//# sourceMappingURL=maps/callback-order-lightbox.js.map
;